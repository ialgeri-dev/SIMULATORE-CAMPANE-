<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>RCTouchBell - Suono Manuale</title>
  <style>
    body {
      font-family: Georgia, serif;
      background-color: #f2f2f2;
      margin: 0;
      padding: 20px;
      color: #333;
    }

    header {
      text-align: center;
      margin-bottom: 20px;
    }

    .logo {
      font-size: 28px;
      font-weight: bold;
    }

    .orario {
      font-size: 36px;
      margin-top: 10px;
    }

    .data {
      font-size: 18px;
      margin-top: 5px;
    }

    .sezione {
      margin: 30px 0;
    }

    .sezione h2 {
      font-size: 20px;
      margin-bottom: 10px;
      text-transform: uppercase;
    }

    .icone {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 15px;
    }

    .campana, .campana-verde, .martello {
      width: 60px;
      height: 60px;
      border-radius: 8px;
      background-color: white;
      border: 1px solid #ccc;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 28px;
      cursor: pointer;
      transition: background-color 0.2s;
    }

    .campana-verde {
      background-color: #c6f0c6;
    }

    .martello::before {
      content: "ðŸ”¨";
    }

    .campana::before,
    .campana-verde::before {
      content: "ðŸ””";
    }

    .barra-inferiore {
      display: flex;
      justify-content: space-around;
      margin-top: 40px;
      padding-top: 20px;
      border-top: 1px solid #ccc;
    }

    .barra-inferiore button {
      background-color: #e0e0e0;
      border: none;
      padding: 10px 20px;
      font-size: 14px;
      border-radius: 6px;
      cursor: pointer;
    }

    .barra-inferiore button.active {
      background-color: #0078d7;
      color: white;
    }

    .registra {
      display: block;
      margin: 0 auto;
      margin-top: 30px;
      padding: 10px 30px;
      font-size: 16px;
      background-color: #0078d7;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }

    .registra:hover {
      background-color: #005fa3;
    }
  </style>
</head>
<body>

  <header>
    <div class="logo">RCTouchBell</div>
    <div class="orario" id="orologio">--:--:--</div>
    <div class="data" id="data">--/--/----</div>
  </header>

  <div class="sezione">
    <h2>Campane a Distesa</h2>
    <div class="icone" id="distesa">
      <div class="campana" data-num="1"></div>
      <div class="campana" data-num="2"></div>
      <div class="campana" data-num="3"></div>
      <div class="campana" data-num="4"></div>
      <div class="campana" data-num="5"></div>
      <div class="campana" data-num="6"></div>
      <div class="campana" data-num="7"></div>
      <div class="campana" data-num="8"></div>
    </div>
  </div>

  <div class="sezione">
    <h2>Campane a Concerto</h2>
    <div class="icone" id="concerto">
      <div class="campana-verde" data-num="1"></div>
      <div class="campana-verde" data-num="2"></div>
      <div class="campana-verde" data-num="3"></div>
      <div class="campana-verde" data-num="4"></div>
      <div class="campana-verde" data-num="5"></div>
      <div class="campana-verde" data-num="6"></div>
      <div class="campana-verde" data-num="7"></div>
      <div class="campana-verde" data-num="8"></div>
    </div>
  </div>

  <div class="sezione">
    <h2>Martelli</h2>
    <div class="icone" id="martelli">
      <div class="martello" data-num="1"></div>
      <div class="martello" data-num="2"></div>
      <div class="martello" data-num="3"></div>
      <div class="martello" data-num="4"></div>
      <div class="martello" data-num="5"></div>
      <div class="martello" data-num="6"></div>
      <div class="martello" data-num="7"></div>
      <div class="martello" data-num="8"></div>
    </div>
  </div>

  <button class="registra">REGISTRA</button>

  <div class="barra-inferiore">
    <button onclick="location.href='elenco.html'">ELENCO SUONI</button>
    <button class="active" onclick="location.href='manuale.html'">SUONO MANUALE</button>
    <button onclick="location.href='programmazione.html'">PROGRAMMAZIONE</button>
    <button onclick="location.href='battito.html'">BATTITO ORE</button>
  </div>

  <script>
    function aggiornaOrologio() {
      const ora = new Date();
      const hh = String(ora.getHours()).padStart(2, '0');
      const mm = String(ora.getMinutes()).padStart(2, '0');
      const ss = String(ora.getSeconds()).padStart(2, '0');
      document.getElementById('orologio').textContent = `${hh}:${mm}:${ss}`;

      const giorno = String(ora.getDate()).padStart(2, '0');
      const mese = String(ora.getMonth() + 1).padStart(2, '0');
      const anno = ora.getFullYear();
      document.getElementById('data').textContent = `${giorno}/${mese}/${anno}`;
    }

    setInterval(aggiornaOrologio, 1000);
    aggiornaOrologio();

    let suonataCorrente = [];

    function registraClick(tipo, numero, elemento) {
      suonataCorrente.push({ tipo, numero });
      elemento.style.backgroundColor = '#ffd700';
      setTimeout(() => {
        elemento.style.backgroundColor = '';
      }, 300);
    }

    document.querySelectorAll('.campana').forEach(el => {
      el.addEventListener('click', () => {
        registraClick('distesa', el.dataset.num, el);
      });
    });

    document.querySelectorAll('.campana-verde').forEach(el => {
      el.addEventListener('click', () => {
        registraClick('concerto', el.dataset.num, el);
      });
    });

    document.querySelectorAll('.martello').forEach(el => {
      el.addEventListener('click', () => {
        registraClick('martello', el.dataset.num, el);
      });
    });

    document.querySelector('.registra').addEventListener('click', () => {
      if (suonataCorrente.length === 0) {
        alert("Nessuna suonata registrata.");
        return;
      }

      const nome = prompt("Inserisci il nome della suonata:");
      if (nome) {
        let elenco = JSON.parse(localStorage.getItem('suonate')) || [];
        elenco.push({ nome, dati: suonataCorrente });
        localStorage.setItem('suonate', JSON.stringify(elenco));
        alert(`Suonata "${nome}" salvata con successo!`);
        suonataCorrente = [];
      }
    });

    window.addEventListener('load', () => {
      const suonata = JSON.parse(localStorage.getItem('suonataDaRiprodurre'));
      if (suonata) {
        riproduciSuonata(suonata.dati);
        localStorage.removeItem('suonataDaRiprodurre');
      }
    });

    function riproduciSuonata(dati) {
      let delay = 0;
      dati.forEach(passaggio => {
        setTimeout(() => {
          let selettore = '';
          if (passaggio.tipo === 'distesa') selettore = '.campana';
          else if (passaggio.tipo === 'concerto') sele

